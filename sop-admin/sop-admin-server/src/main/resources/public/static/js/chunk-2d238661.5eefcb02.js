(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d238661"],{fee1:function(e,t,a){"use strict";a.r(t);var o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0,model:e.searchFormData,size:"mini"},nativeOn:{submit:function(e){e.preventDefault()}}},[a("el-form-item",{attrs:{label:"接口名"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{clearable:!0},model:{value:e.searchFormData.routeId,callback:function(t){e.$set(e.searchFormData,"routeId",t)},expression:"searchFormData.routeId"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"serviceId"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{clearable:!0},model:{value:e.searchFormData.serviceId,callback:function(t){e.$set(e.searchFormData,"serviceId",t)},expression:"searchFormData.serviceId"}})],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search","native-type":"submit"},on:{click:e.loadTable}},[e._v("查询")])],1)],1),e._v(" "),a("el-table",{attrs:{data:e.pageInfo.list,"row-key":"id",lazy:"","empty-text":"无数据",load:e.loadInstanceMonitorInfo}},[a("el-table-column",{attrs:{fixed:"",prop:"instanceId",label:"网关实例",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.children?e._e():a("span",[e._v(e._s(t.row.instanceId))])]}}])}),e._v(" "),a("el-table-column",{attrs:{fixed:"",prop:"name",label:"接口名 (版本号)",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.name+(t.row.version?" ("+t.row.version+")":""))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"serviceId",label:"serviceId",width:"150"}}),e._v(" "),a("el-table-column",{attrs:{prop:"maxTime",label:"最大耗时(ms)"}},[a("template",{slot:"header"},[e._v("\n        最大耗时(ms)\n        "),a("el-tooltip",{attrs:{content:"耗时计算：签名验证成功后开始，应用返回结果后结束",placement:"top"}},[a("i",{staticClass:"el-icon-question",staticStyle:{cursor:"pointer"}})])],1)],2),e._v(" "),a("el-table-column",{attrs:{prop:"minTime",label:"最小耗时(ms)"}}),e._v(" "),a("el-table-column",{attrs:{prop:"avgTime",label:"平均耗时(ms)"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(t.row.avgTime.toFixed(1))+"\n      ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"totalRequestCount",label:"总调用次数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"successCount",label:"成功次数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"errorCount",label:"失败次数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"unsolvedErrorCount",label:"未解决错误"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.unsolvedErrorCount>0?a("el-link",{staticStyle:{"text-decoration":"underline"},attrs:{underline:!1,type:"danger"},on:{click:function(a){return e.onShowErrorDetail(t.row)}}},[e._v("\n          "+e._s(t.row.unsolvedErrorCount)+"\n        ")]):e._e(),e._v(" "),0===t.row.unsolvedErrorCount?a("span",[e._v("0")]):e._e()]}}])})],1),e._v(" "),a("el-pagination",{staticStyle:{"margin-top":"5px"},attrs:{background:"","current-page":e.searchFormData.pageIndex,"page-size":e.searchFormData.pageSize,"page-sizes":[5,10,20,40],total:e.pageInfo.total,layout:"total, sizes, prev, pager, next"},on:{"size-change":e.onSizeChange,"current-change":e.onPageIndexChange}}),e._v(" "),a("el-dialog",{attrs:{title:e.errorMsgData.title,visible:e.logDetailVisible,"close-on-click-modal":!1,width:"70%"},on:{"update:visible":function(t){e.logDetailVisible=t},close:e.onCloseErrorDlg}},[a("el-alert",{staticClass:"el-alert-tip",attrs:{title:"修复错误后请标记解决",closable:!1}}),e._v(" "),a("el-table",{attrs:{data:e.errorMsgData.pageInfo.rows,"empty-text":"无错误日志"}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{type:"textarea",rows:8,readonly:""},model:{value:t.row.errorMsg,callback:function(a){e.$set(t.row,"errorMsg",a)},expression:"props.row.errorMsg"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"errorMsg",label:"错误内容"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.errorMsg.length>50?a("span",[e._v(e._s(t.row.errorMsg.substring(0,50))+"...")]):a("span",[e._v(e._s(t.row.errorMsg))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"instanceId",label:"实例ID",width:"150px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"count",label:"报错次数",width:"80px"}}),e._v(" "),a("el-table-column",{attrs:{prop:"gmtModified",label:"报错时间",width:"160px"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-link",{attrs:{type:"primary"},on:{click:function(a){return e.onSolve(t.row)}}},[e._v("标记解决")])]}}])})],1),e._v(" "),a("el-pagination",{staticStyle:{"margin-top":"5px"},attrs:{background:"","current-page":e.errorMsgFormData.pageIndex,"page-size":e.errorMsgFormData.pageSize,"page-sizes":[5,10,20,40],total:e.errorMsgData.pageInfo.total,layout:"total, sizes, prev, pager, next"},on:{"size-change":e.onSizeChange,"current-change":e.onPageIndexChange}}),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.logDetailVisible=!1}}},[e._v("关 闭")])],1)],1)],1)},r=[],n=(a("7f7f"),{data:function(){return{searchFormData:{routeId:"",serviceId:"",pageIndex:1,pageSize:20},pageInfo:{list:[],total:0},logDetailVisible:!1,errorMsgFormData:{routeId:"",instanceId:"",pageIndex:1,pageSize:5},errorMsgData:{title:"",name:"",version:"",pageInfo:{rows:[],total:0}}}},created:function(){this.loadTable()},methods:{loadTable:function(){this.post("monitornew.data.page",this.searchFormData,function(e){this.pageInfo=e.data})},loadErrorData:function(){this.post("monitornew.error.page",this.errorMsgFormData,function(e){this.errorMsgData.pageInfo=e.data,this.logDetailVisible=!0})},loadInstanceMonitorInfo:function(e,t,a){this.post("monitornew.routeid.data.get",{routeId:e.routeId},function(t){var o=t.data;e.children=o,a(o)})},onShowErrorDetail:function(e){this.errorMsgData.title="错误日志 ".concat(e.name,"（").concat(e.version,"）"),this.errorMsgData.name=e.name,this.errorMsgData.version=e.version,this.errorMsgFormData.routeId=e.routeId,this.errorMsgFormData.instanceId=e.instanceId,this.loadErrorData()},onSolve:function(e){this.confirm("确认标记为已解决吗？",function(t){this.post("monitornew.error.solve",{routeId:e.routeId,errorId:e.errorId},function(e){t(),this.loadErrorData()})})},onCloseErrorDlg:function(){this.loadTable()},onSizeChange:function(e){this.searchFormData.pageSize=e,this.loadTable()},onAdd:function(){this.dialogTitle="新增IP",this.dialogVisible=!0,this.dialogFormData.id=0},onPageIndexChange:function(e){this.searchFormData.pageIndex=e,this.loadTable()}}}),l=n,s=a("2877"),i=Object(s["a"])(l,o,r,!1,null,null,null);t["default"]=i.exports}}]);